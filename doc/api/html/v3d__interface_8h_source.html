<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>V3D: v3d_interface.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">V3D</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('v3d__interface_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>v3d_interface.h</h1>  </div>
</div>
<div class="contents">
<a href="v3d__interface_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c)2006-2010  Hanchuan Peng (Janelia Farm, Howard Hughes Medical Institute).</span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment"> */</span>
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="comment">/************</span>
<a name="l00008"></a>00008 <span class="comment">                                            ********* LICENSE NOTICE ************</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">This folder contains all source codes for the V3D project, which is subject to the following conditions if you want to use it.</span>
<a name="l00011"></a>00011 <span class="comment"></span>
<a name="l00012"></a>00012 <span class="comment">You will ***have to agree*** the following terms, *before* downloading/using/running/editing/changing any portion of codes in this package.</span>
<a name="l00013"></a>00013 <span class="comment"></span>
<a name="l00014"></a>00014 <span class="comment">1. This package is free for non-profit research, but needs a special license for any commercial purpose. Please contact Hanchuan Peng for details.</span>
<a name="l00015"></a>00015 <span class="comment"></span>
<a name="l00016"></a>00016 <span class="comment">2. You agree to appropriately cite this work in your related studies and publications.</span>
<a name="l00017"></a>00017 <span class="comment"></span>
<a name="l00018"></a>00018 <span class="comment">Peng, H., Ruan, Z., Long, F., Simpson, J.H., and Myers, E.W. (2010) “V3D enables real-time 3D visualization and quantitative analysis of large-scale biological image data sets,” Nature Biotechnology, Vol. 28, No. 4, pp. 348-353, DOI: 10.1038/nbt.1612. ( http://penglab.janelia.org/papersall/docpdf/2010_NBT_V3D.pdf )</span>
<a name="l00019"></a>00019 <span class="comment"></span>
<a name="l00020"></a>00020 <span class="comment">Peng, H, Ruan, Z., Atasoy, D., and Sternson, S. (2010) “Automatic reconstruction of 3D neuron structures using a graph-augmented deformable model,” Bioinformatics, Vol. 26, pp. i38-i46, 2010. ( http://penglab.janelia.org/papersall/docpdf/2010_Bioinfo_GD_ISMB2010.pdf )</span>
<a name="l00021"></a>00021 <span class="comment"></span>
<a name="l00022"></a>00022 <span class="comment">3. This software is provided by the copyright holders (Hanchuan Peng), Howard Hughes Medical Institute, Janelia Farm Research Campus, and contributors &quot;as is&quot; and any express or implied warranties, including, but not limited to, any implied warranties of merchantability, non-infringement, or fitness for a particular purpose are disclaimed. In no event shall the copyright owner, Howard Hughes Medical Institute, Janelia Farm Research Campus, or contributors be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; reasonable royalties; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this software, even if advised of the possibility of such damage.</span>
<a name="l00023"></a>00023 <span class="comment"></span>
<a name="l00024"></a>00024 <span class="comment">4. Neither the name of the Howard Hughes Medical Institute, Janelia Farm Research Campus, nor Hanchuan Peng, may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00025"></a>00025 <span class="comment"></span>
<a name="l00026"></a>00026 <span class="comment">*************/</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="comment">/*****************************************************************************************************</span>
<a name="l00032"></a>00032 <span class="comment">*</span>
<a name="l00033"></a>00033 <span class="comment">* V3D&#39;s plug-in interface of QObject</span>
<a name="l00034"></a>00034 <span class="comment">*</span>
<a name="l00035"></a>00035 <span class="comment">* Copyright: Hanchuan Peng (Howard Hughes Medical Institute, Janelia Farm Research Campus).</span>
<a name="l00036"></a>00036 <span class="comment">* The License Information and User Agreement should be seen at http://penglab.janelia.org/proj/v3d .</span>
<a name="l00037"></a>00037 <span class="comment">*</span>
<a name="l00038"></a>00038 <span class="comment">* 2009-Aug-21</span>
<a name="l00039"></a>00039 <span class="comment">* 2010-06-01</span>
<a name="l00040"></a>00040 <span class="comment">* 2010-06-02: add setPluginOutputAndDisplayUsingGlobalSetting()</span>
<a name="l00041"></a>00041 <span class="comment">* 2010-06-03: add two others function to extract and assemble the results of different channels</span>
<a name="l00042"></a>00042 <span class="comment">* 2010-08-03: add pushObjectIn3DWindow, pushImageIn3DWindow, pushTimepointIn3DWindow, open/close(ROI)3DWindow</span>
<a name="l00043"></a>00043 <span class="comment">* 2010-08-04: &quot;com.janelia.v3d.V3DPluginInterface/1.1&quot;</span>
<a name="l00044"></a>00044 <span class="comment">* ********************************************************************************************************</span>
<a name="l00045"></a>00045 <span class="comment">*/</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="preprocessor">#ifndef _V3D_INTERFACE_H_</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#define _V3D_INTERFACE_H_</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &lt;QtCore&gt;</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="keyword">class </span><a class="code" href="classV3DPluginInterface2__1.html">V3DPluginInterface2_1</a>;
<a name="l00053"></a>00053 <span class="keyword">class </span><a class="code" href="classV3DPluginInterface2.html">V3DPluginInterface2</a>;
<a name="l00054"></a>00054 <span class="keyword">class </span><a class="code" href="classV3DPluginInterface.html">V3DPluginInterface</a>;
<a name="l00055"></a>00055 <span class="keyword">class </span><a class="code" href="classV3DSingleImageInterface2__1.html">V3DSingleImageInterface2_1</a>;
<a name="l00056"></a>00056 <span class="keyword">class </span><a class="code" href="classV3DSingleImageInterface.html">V3DSingleImageInterface</a>;
<a name="l00057"></a>00057 QT_BEGIN_NAMESPACE
<a name="l00058"></a>00058     <a class="code" href="v3d__interface_8h.html#a3dfa02de0f9922c30643e56e27b44466">Q_DECLARE_INTERFACE</a>(<a class="code" href="classV3DPluginInterface2__1.html">V3DPluginInterface2_1</a>, <span class="stringliteral">&quot;com.janelia.v3d.V3DPluginInterface/2.1&quot;</span>);
<a name="l00059"></a>00059     <a class="code" href="v3d__interface_8h.html#a3dfa02de0f9922c30643e56e27b44466">Q_DECLARE_INTERFACE</a>(<a class="code" href="classV3DPluginInterface2.html">V3DPluginInterface2</a>, <span class="stringliteral">&quot;com.janelia.v3d.V3DPluginInterface/2.0&quot;</span>);
<a name="l00060"></a>00060     <a class="code" href="v3d__interface_8h.html#a3dfa02de0f9922c30643e56e27b44466">Q_DECLARE_INTERFACE</a>(<a class="code" href="classV3DPluginInterface.html">V3DPluginInterface</a>, <span class="stringliteral">&quot;com.janelia.v3d.V3DPluginInterface/1.1&quot;</span>);
<a name="l00061"></a>00061     <a class="code" href="v3d__interface_8h.html#a3dfa02de0f9922c30643e56e27b44466">Q_DECLARE_INTERFACE</a>(<a class="code" href="classV3DSingleImageInterface2__1.html">V3DSingleImageInterface2_1</a>, <span class="stringliteral">&quot;com.janelia.v3d.V3DSingleImageInterface/2.1&quot;</span>);
<a name="l00062"></a>00062     <a class="code" href="v3d__interface_8h.html#a3dfa02de0f9922c30643e56e27b44466">Q_DECLARE_INTERFACE</a>(<a class="code" href="classV3DSingleImageInterface.html">V3DSingleImageInterface</a>, <span class="stringliteral">&quot;com.janelia.v3d.V3DSingleImageInterface/1.0&quot;</span>);
<a name="l00063"></a>00063 QT_END_NAMESPACE
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="comment">//==========================================================================================</span>
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 <span class="preprocessor">#include &quot;<a class="code" href="basic__4dimage_8h.html">basic_4dimage.h</a>&quot;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &quot;<a class="code" href="basic__surf__objs_8h.html">basic_surf_objs.h</a>&quot;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &quot;<a class="code" href="basic__landmark_8h.html">basic_landmark.h</a>&quot;</span>
<a name="l00070"></a>00070 <span class="preprocessor">#include &quot;<a class="code" href="basic__view3d_8h.html">basic_view3d.h</a>&quot;</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &quot;<a class="code" href="basic__triview_8h.html">basic_triview.h</a>&quot;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &quot;<a class="code" href="v3d__global__preference_8h.html">v3d_global_preference.h</a>&quot;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &quot;<a class="code" href="v3d__message_8h.html">v3d_message.h</a>&quot;</span>
<a name="l00074"></a>00074 
<a name="l00075"></a><a class="code" href="structV3DPluginArgItem.html">00075</a> <span class="keyword">struct </span><a class="code" href="structV3DPluginArgItem.html">V3DPluginArgItem</a>
<a name="l00076"></a>00076 {
<a name="l00077"></a><a class="code" href="structV3DPluginArgItem.html#a8801db0cd597fc2471a1c16f359b45f8">00077</a>     QString <a class="code" href="structV3DPluginArgItem.html#a8801db0cd597fc2471a1c16f359b45f8">type</a>;   <span class="keywordtype">void</span> * <a class="code" href="structV3DPluginArgItem.html#a117104b82864d3b23ec174af6d392709">p</a>;
<a name="l00078"></a>00078 };
<a name="l00079"></a><a class="code" href="v3d__interface_8h.html#ad8d74eda7e04c47de8829b46ee61462d">00079</a> <span class="keyword">typedef</span> QList&lt;V3DPluginArgItem&gt; <a class="code" href="v3d__interface_8h.html#ad8d74eda7e04c47de8829b46ee61462d">V3DPluginArgList</a>;
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="v3d__interface_8h.html#a8387aa904c716bc54806ac290d1d4872">00081</a> <span class="keyword">typedef</span> QList&lt;QPolygon&gt;        <a class="code" href="v3d__interface_8h.html#a8387aa904c716bc54806ac290d1d4872">ROIList</a>;
<a name="l00082"></a><a class="code" href="v3d__interface_8h.html#a96c3934d5e002240864987a29bb363ae">00082</a> <span class="keyword">typedef</span> QList&lt;LocationSimple&gt;  <a class="code" href="v3d__interface_8h.html#a96c3934d5e002240864987a29bb363ae">LandmarkList</a>;
<a name="l00083"></a>00083 <span class="comment">//typedef QList&lt;ImageMarker&gt;     MarkerList;</span>
<a name="l00084"></a>00084 <span class="comment">//typedef QList&lt;LabelSurf&gt;       LabelSurfList;</span>
<a name="l00085"></a>00085 <span class="comment">//typedef QList&lt;NeuronSWC&gt;       SWCList;</span>
<a name="l00086"></a>00086 <span class="comment">//typedef QList&lt;CellAPO&gt;         APOList;</span>
<a name="l00087"></a>00087 
<a name="l00088"></a><a class="code" href="v3d__interface_8h.html#a181de0bde98ba7fc9211082f89501e8b">00088</a> <span class="keyword">typedef</span> QList&lt;v3dhandle&gt;       <a class="code" href="v3d__interface_8h.html#a181de0bde98ba7fc9211082f89501e8b">v3dhandleList</a>;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="comment">// this is the export interface of V3D functions to plugin</span>
<a name="l00091"></a><a class="code" href="classV3DPluginCallback.html">00091</a> <span class="keyword">class </span><a class="code" href="classV3DPluginCallback.html">V3DPluginCallback</a>
<a name="l00092"></a>00092 {
<a name="l00093"></a>00093 <span class="keyword">public</span>:
<a name="l00094"></a><a class="code" href="classV3DPluginCallback.html#a47bd70d2dc12b495f21c018b78bafa68">00094</a>     <span class="keyword">virtual</span> <a class="code" href="classV3DPluginCallback.html#a47bd70d2dc12b495f21c018b78bafa68">~V3DPluginCallback</a>() {}
<a name="l00095"></a>00095     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classV3DPluginCallback.html#a8a60fc5c14483906887cc004281a0fe6">callPluginFunc</a>(<span class="keyword">const</span> QString &amp; plugin_name, <span class="keyword">const</span> QString &amp; func_name,
<a name="l00096"></a>00096             <span class="keyword">const</span> <a class="code" href="v3d__interface_8h.html#ad8d74eda7e04c47de8829b46ee61462d">V3DPluginArgList</a> &amp; input, <a class="code" href="v3d__interface_8h.html#ad8d74eda7e04c47de8829b46ee61462d">V3DPluginArgList</a> &amp; output) = 0;
<a name="l00097"></a>00097 
<a name="l00098"></a>00098     <span class="keyword">virtual</span> <a class="code" href="v3d__interface_8h.html#a181de0bde98ba7fc9211082f89501e8b">v3dhandleList</a> <a class="code" href="classV3DPluginCallback.html#a18f2f61ce45d6978987a5bc76c25ff5a">getImageWindowList</a>() <span class="keyword">const</span> = 0;
<a name="l00099"></a>00099     <span class="keyword">virtual</span> <a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> <a class="code" href="classV3DPluginCallback.html#a72c10370ab576317c1c05b67e4c2960e">currentImageWindow</a>() = 0;
<a name="l00100"></a>00100     <span class="keyword">virtual</span> <a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> <a class="code" href="classV3DPluginCallback.html#af9bc8e0571747cae01b16fb1e2af77aa">curHiddenSelectedWindow</a>() = 0; <span class="comment">//by PHC, 20101009. curHiddenSelectedWindow may not be the *currentImageWindow* if the selection is done from a 3d viewer</span>
<a name="l00101"></a>00101     <span class="keyword">virtual</span> <a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> <a class="code" href="classV3DPluginCallback.html#ac55437794570400a8f37182888340b9e">newImageWindow</a>(QString name=<span class="stringliteral">&quot;new_image&quot;</span>) = 0;
<a name="l00102"></a>00102     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classV3DPluginCallback.html#a08918342ce3fbca82f01d2a5ba4dd1be">updateImageWindow</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00103"></a>00103 
<a name="l00104"></a>00104     <span class="keyword">virtual</span> QString <a class="code" href="classV3DPluginCallback.html#a88ae30a87fb80fdc24804068d54067cf">getImageName</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) <span class="keyword">const</span> = 0;
<a name="l00105"></a>00105     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classV3DPluginCallback.html#acd073ac14588becc7069c12e2b4a70b9">setImageName</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window, QString name) = 0;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107     <span class="keyword">virtual</span> <a class="code" href="classImage4DSimple.html">Image4DSimple</a> * <a class="code" href="classV3DPluginCallback.html#af827b1990ece497ed82497af163e150c">getImage</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00108"></a>00108     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classV3DPluginCallback.html#ae455a3e5334adff2872623bc3517a464">setImage</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window, <a class="code" href="classImage4DSimple.html">Image4DSimple</a> * image) = 0;
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     <span class="comment">//a special debug function. don&#39;t use this if you don&#39;t know how to use. by PHC, 100731</span>
<a name="l00111"></a>00111     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classV3DPluginCallback.html#aec32b047392bce1a07083d441e47aca9">setImageTest</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window, <a class="code" href="classImage4DSimple.html">Image4DSimple</a> * image, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *a) = 0;
<a name="l00112"></a>00112 
<a name="l00113"></a>00113     <span class="keyword">virtual</span> <a class="code" href="v3d__interface_8h.html#a96c3934d5e002240864987a29bb363ae">LandmarkList</a>  <a class="code" href="classV3DPluginCallback.html#af253dbff0bee925dcf8a1062333f50c0">getLandmark</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00114"></a>00114     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classV3DPluginCallback.html#a950d6a92315d7bcf4fa665da83005a81">setLandmark</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window, <a class="code" href="v3d__interface_8h.html#a96c3934d5e002240864987a29bb363ae">LandmarkList</a> &amp; landmark_list) = 0;
<a name="l00115"></a>00115 
<a name="l00116"></a>00116     <span class="keyword">virtual</span> <a class="code" href="v3d__interface_8h.html#a8387aa904c716bc54806ac290d1d4872">ROIList</a> <a class="code" href="classV3DPluginCallback.html#a4edbf78a9906b156a1a11f4e910a3b52">getROI</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00117"></a>00117     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classV3DPluginCallback.html#a89544c9d470325d0c2bc32df6b5bfa66">setROI</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window, <a class="code" href="v3d__interface_8h.html#a8387aa904c716bc54806ac290d1d4872">ROIList</a> &amp; roi_list) = 0;
<a name="l00118"></a>00118 
<a name="l00119"></a>00119     <span class="keyword">virtual</span> <a class="code" href="structNeuronTree.html">NeuronTree</a> <a class="code" href="classV3DPluginCallback.html#a08dfb78ccd4a791dc56a1257e16ee4cf">getSWC</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00120"></a>00120     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classV3DPluginCallback.html#ab776dc9829c2ae9458c8b0fb7341230d">setSWC</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window, <a class="code" href="structNeuronTree.html">NeuronTree</a> &amp; nt) = 0;
<a name="l00121"></a>00121 
<a name="l00122"></a>00122     <span class="keyword">virtual</span> <a class="code" href="structV3D__GlobalSetting.html">V3D_GlobalSetting</a> <a class="code" href="classV3DPluginCallback.html#a53aadb1e47fc806789e64a1b1bbae2d7">getGlobalSetting</a>() = 0;
<a name="l00123"></a>00123     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classV3DPluginCallback.html#a78d6737c58867b64d3d5f3a3d9ca3511">setGlobalSetting</a>( <a class="code" href="structV3D__GlobalSetting.html">V3D_GlobalSetting</a> &amp; gs ) = 0;
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 <span class="comment">// 1.1 functions</span>
<a name="l00126"></a>00126     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classV3DPluginCallback.html#a3d572e277f38d6f012472969f0f17a31">open3DWindow</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00127"></a>00127     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classV3DPluginCallback.html#ac6b4af75130d05c3afdf7edab21c7c96">close3DWindow</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00128"></a>00128     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classV3DPluginCallback.html#a609b27b96d890d5977986fd09d166fa6">openROI3DWindow</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00129"></a>00129     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classV3DPluginCallback.html#a8936504c154b4bc8d029e244e1c89d93">closeROI3DWindow</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00130"></a>00130 
<a name="l00131"></a>00131     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classV3DPluginCallback.html#a4e996d0bb0ac13c28b1a4afa31e5d0f6">pushObjectIn3DWindow</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00132"></a>00132     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classV3DPluginCallback.html#a8102ce5898ba67049d3a664aaadc7f84">pushImageIn3DWindow</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00133"></a>00133     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classV3DPluginCallback.html#aa1a4c585b7ee4cfc1e89d56476e1156a">pushTimepointIn3DWindow</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window, <span class="keywordtype">int</span> timepoint) = 0;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classV3DPluginCallback.html#aae31310419978dbd80e0fc381c03faf5">screenShot3DWindow</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window, QString BMPfilename) = 0;
<a name="l00136"></a>00136     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classV3DPluginCallback.html#a04cedf43256345ef97083180cee46f6d">screenShotROI3DWindow</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window, QString BMPfilename) = 0;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 };
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="comment">//this is the major V3D plugin interface, and will be enhanced continuously</span>
<a name="l00141"></a><a class="code" href="classV3DPluginInterface.html">00141</a> <span class="keyword">class </span><a class="code" href="classV3DPluginInterface.html">V3DPluginInterface</a>
<a name="l00142"></a>00142 {
<a name="l00143"></a>00143 <span class="keyword">public</span>:
<a name="l00144"></a><a class="code" href="classV3DPluginInterface.html#a079a0c12c6768744abf8912715ac24cb">00144</a>     <span class="keyword">virtual</span> <a class="code" href="classV3DPluginInterface.html#a079a0c12c6768744abf8912715ac24cb">~V3DPluginInterface</a>() {}
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     <span class="keyword">virtual</span> QStringList <a class="code" href="classV3DPluginInterface.html#a22f62f227004e4e25944cf28f8feb449">menulist</a>() <span class="keyword">const</span> = 0;
<a name="l00147"></a>00147     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classV3DPluginInterface.html#ab3751d9375166fa887ed54fd3ebba5d2">domenu</a>(<span class="keyword">const</span> QString &amp; menu_name, <a class="code" href="classV3DPluginCallback.html">V3DPluginCallback</a> &amp; v3d, QWidget * parent) = 0;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     <span class="keyword">virtual</span> QStringList <a class="code" href="classV3DPluginInterface.html#a7662bfb4e0be647b397a83f1d0eac24d">funclist</a>() <span class="keyword">const</span> = 0;
<a name="l00150"></a>00150     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classV3DPluginInterface.html#afa643961c4e8a1de6dd3b75cc404f2df">dofunc</a>(<span class="keyword">const</span> QString &amp; func_name, <span class="keyword">const</span> <a class="code" href="v3d__interface_8h.html#ad8d74eda7e04c47de8829b46ee61462d">V3DPluginArgList</a> &amp; input, <a class="code" href="v3d__interface_8h.html#ad8d74eda7e04c47de8829b46ee61462d">V3DPluginArgList</a> &amp; output,
<a name="l00151"></a>00151                                                 QWidget * parent) = 0;
<a name="l00152"></a>00152 };
<a name="l00153"></a>00153 
<a name="l00154"></a>00154 <span class="comment">//==========================================================================================</span>
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 <span class="keyword">class </span><a class="code" href="classTriviewControl.html">TriviewControl</a>; <span class="comment">//added by PHC, 2010-Dec-08</span>
<a name="l00157"></a>00157 <span class="keyword">class </span><a class="code" href="classView3DControl.html">View3DControl</a>;
<a name="l00158"></a>00158 
<a name="l00159"></a><a class="code" href="classV3DPluginCallback2.html">00159</a> <span class="keyword">class </span><a class="code" href="classV3DPluginCallback2.html">V3DPluginCallback2</a> : <span class="keyword">public</span> <a class="code" href="classV3DPluginCallback.html">V3DPluginCallback</a>
<a name="l00160"></a>00160 {
<a name="l00161"></a>00161 <span class="keyword">public</span>:
<a name="l00162"></a><a class="code" href="classV3DPluginCallback2.html#a6d68be4ea29f37c933a3e801005bcd38">00162</a>     <span class="keyword">virtual</span> <a class="code" href="classV3DPluginCallback2.html#a6d68be4ea29f37c933a3e801005bcd38">~V3DPluginCallback2</a>() {}
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     <span class="keyword">virtual</span> <a class="code" href="classView3DControl.html">View3DControl</a> * <a class="code" href="classV3DPluginCallback2.html#a2b83dc484303b7e6a3d6f48979ea42d1">getView3DControl</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00165"></a>00165     <span class="keyword">virtual</span> <a class="code" href="classView3DControl.html">View3DControl</a> * <a class="code" href="classV3DPluginCallback2.html#ae4f99ecc8c5e6ee86bfadadaa8442903">getLocalView3DControl</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00166"></a>00166     <span class="keyword">virtual</span> <a class="code" href="classTriviewControl.html">TriviewControl</a> * <a class="code" href="classV3DPluginCallback2.html#abd54dce6a8899c10151366f92452f8a5">getTriviewControl</a>(<a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> image_window) = 0;
<a name="l00167"></a>00167 };
<a name="l00168"></a>00168 
<a name="l00169"></a><a class="code" href="classV3DPluginInterface2.html">00169</a> <span class="keyword">class </span><a class="code" href="classV3DPluginInterface2.html">V3DPluginInterface2</a>
<a name="l00170"></a>00170 {
<a name="l00171"></a>00171 <span class="keyword">public</span>:
<a name="l00172"></a><a class="code" href="classV3DPluginInterface2.html#acff3d8c1cef9dd0dddf16f7f06a51ca0">00172</a>     <span class="keyword">virtual</span> <a class="code" href="classV3DPluginInterface2.html#acff3d8c1cef9dd0dddf16f7f06a51ca0">~V3DPluginInterface2</a>() {}
<a name="l00173"></a>00173 
<a name="l00174"></a>00174     <span class="keyword">virtual</span> QStringList <a class="code" href="classV3DPluginInterface2.html#a22f62f227004e4e25944cf28f8feb449">menulist</a>() <span class="keyword">const</span> = 0;
<a name="l00175"></a>00175     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classV3DPluginInterface2.html#a85be29cc61976730e4cb832b7740c485">domenu</a>(<span class="keyword">const</span> QString &amp; menu_name, <a class="code" href="classV3DPluginCallback2.html">V3DPluginCallback2</a> &amp; v3d, QWidget * parent) = 0;
<a name="l00176"></a>00176 
<a name="l00177"></a>00177     <span class="keyword">virtual</span> QStringList <a class="code" href="classV3DPluginInterface2.html#a7662bfb4e0be647b397a83f1d0eac24d">funclist</a>() <span class="keyword">const</span> = 0;
<a name="l00178"></a>00178     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classV3DPluginInterface2.html#ae61d268a10b1a56379e67db2c15fffcf">dofunc</a>(<span class="keyword">const</span> QString &amp; func_name, <span class="keyword">const</span> <a class="code" href="v3d__interface_8h.html#ad8d74eda7e04c47de8829b46ee61462d">V3DPluginArgList</a> &amp; input, <a class="code" href="v3d__interface_8h.html#ad8d74eda7e04c47de8829b46ee61462d">V3DPluginArgList</a> &amp; output,
<a name="l00179"></a>00179                                                 <a class="code" href="classV3DPluginCallback2.html">V3DPluginCallback2</a> &amp; v3d, QWidget * parent) = 0;
<a name="l00180"></a>00180 };
<a name="l00181"></a>00181 
<a name="l00182"></a>00182 <span class="comment">//=============================================================================</span>
<a name="l00183"></a>00183 <span class="comment">// CMB Nov 23, 2010</span>
<a name="l00184"></a>00184 <span class="comment">// enhance plugin interface to support plugin version numbers</span>
<a name="l00185"></a>00185 <span class="comment">// to help V3D automatically update itself.</span>
<a name="l00186"></a>00186 <span class="comment">// V3DPluginInterface2_1 is just like V3DPluginInterface2, plus the getPluginVersion() method.</span>
<a name="l00187"></a>00187 
<a name="l00188"></a><a class="code" href="classV3DPluginInterface2__1.html">00188</a> <span class="keyword">class </span><a class="code" href="classV3DPluginInterface2__1.html">V3DPluginInterface2_1</a> : <span class="keyword">public</span> <a class="code" href="classV3DPluginInterface2.html">V3DPluginInterface2</a>
<a name="l00189"></a>00189 {
<a name="l00190"></a>00190 <span class="keyword">public</span>:
<a name="l00191"></a>00191         <span class="comment">// As a particular plugin is improved,</span>
<a name="l00192"></a>00192         <span class="comment">// this version number should monotonically increase</span>
<a name="l00193"></a>00193         <span class="keyword">virtual</span> <span class="keywordtype">float</span> <a class="code" href="classV3DPluginInterface2__1.html#a44cf69d29f96aac5904170d81e932492">getPluginVersion</a>() <span class="keyword">const</span> = 0;
<a name="l00194"></a>00194 };
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="comment">//==========================================================================================</span>
<a name="l00197"></a>00197 
<a name="l00198"></a>00198 <span class="comment">//a function for considering the global setting to extract the IDs of the channels for plugin processing</span>
<a name="l00199"></a><a class="code" href="v3d__interface_8h.html#af5277b87b2ea9839114645ef650f8d2e">00199</a> <span class="keyword">inline</span> QList&lt;V3DLONG&gt; <a class="code" href="v3d__interface_8h.html#af5277b87b2ea9839114645ef650f8d2e">getChannelListForProcessingFromGlobalSetting</a>( <a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> nc, <a class="code" href="classV3DPluginCallback.html">V3DPluginCallback</a> &amp; callback ) <span class="comment">//nc is the # of channels in an image</span>
<a name="l00200"></a>00200 {
<a name="l00201"></a>00201     QList&lt;V3DLONG&gt; chlist;
<a name="l00202"></a>00202     <span class="keywordflow">if</span> ( nc&lt;=0 )
<a name="l00203"></a>00203     {
<a name="l00204"></a>00204         <a class="code" href="v3d__message_8cpp.html#a2d151f6d35fa7d42db1b95c2d506aeb1">v3d_msg</a>(QString(<span class="stringliteral">&quot;Invalid # channels parameter to getChannelListForProcessingFromGlobalSetting().&quot;</span>));
<a name="l00205"></a>00205         <span class="keywordflow">return</span> chlist;
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208     <span class="comment">//get the list of channels for processing</span>
<a name="l00209"></a>00209 
<a name="l00210"></a>00210     <span class="keywordtype">int</span> chano_preference = callback.<a class="code" href="classV3DPluginCallback.html#a53aadb1e47fc806789e64a1b1bbae2d7">getGlobalSetting</a>().<a class="code" href="structV3D__GlobalSetting.html#aa0e5e085f18f93b697588ae3ab2546ff">iChannel_for_plugin</a>;
<a name="l00211"></a>00211     <span class="keywordflow">if</span> ( chano_preference &gt;= nc )
<a name="l00212"></a>00212     {
<a name="l00213"></a>00213         <a class="code" href="v3d__message_8cpp.html#a2d151f6d35fa7d42db1b95c2d506aeb1">v3d_msg</a>(QString(<span class="stringliteral">&quot;The global setting uses a channel id that is bigger than the # of channels of this image. Apply to processing to the last channel of this image.&quot;</span>));
<a name="l00214"></a>00214         chano_preference = nc-1;
<a name="l00215"></a>00215     }
<a name="l00216"></a>00216 
<a name="l00217"></a>00217     <span class="keywordflow">if</span> (chano_preference &lt; 0)
<a name="l00218"></a>00218     {
<a name="l00219"></a>00219         <span class="keywordflow">for</span> (<a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> i=0;i&lt;nc;i++)
<a name="l00220"></a>00220             chlist &lt;&lt; i;
<a name="l00221"></a>00221     }
<a name="l00222"></a>00222     <span class="keywordflow">else</span> {
<a name="l00223"></a>00223         chlist &lt;&lt; chano_preference;
<a name="l00224"></a>00224     }
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     <span class="keywordflow">return</span> chlist;
<a name="l00227"></a>00227 }
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 <span class="comment">//a function for considering the global setting to extract the DATA of the channels for plugin processing</span>
<a name="l00230"></a><a class="code" href="v3d__interface_8h.html#aa1c5e35f6772c533924e034de093f52a">00230</a> <span class="keyword">inline</span> QList&lt;V3D_Image3DBasic&gt; <a class="code" href="v3d__interface_8h.html#aa1c5e35f6772c533924e034de093f52a">getChannelDataForProcessingFromGlobalSetting</a>( <a class="code" href="classImage4DSimple.html">Image4DSimple</a> * p, <a class="code" href="classV3DPluginCallback.html">V3DPluginCallback</a> &amp; callback)
<a name="l00231"></a>00231 {
<a name="l00232"></a>00232     QList&lt;V3D_Image3DBasic&gt; dlist;
<a name="l00233"></a>00233     <span class="keywordflow">if</span> ( !p || !p-&gt;<a class="code" href="classImage4DSimple.html#a20fe5d79265eec66d47eb44c991ca5c3">valid</a>() )
<a name="l00234"></a>00234     {
<a name="l00235"></a>00235         <a class="code" href="v3d__message_8cpp.html#a2d151f6d35fa7d42db1b95c2d506aeb1">v3d_msg</a>(QString(<span class="stringliteral">&quot;Invalid inputs to getChannelDataForProcessingFromGlobalSetting(). Don&#39;t output the plugin results.\n&quot;</span>));
<a name="l00236"></a>00236         <span class="keywordflow">return</span> dlist;
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238 
<a name="l00239"></a>00239     <span class="comment">//get the list of channels for processing</span>
<a name="l00240"></a>00240     QList&lt;V3DLONG&gt; chlist = <a class="code" href="v3d__interface_8h.html#af5277b87b2ea9839114645ef650f8d2e">getChannelListForProcessingFromGlobalSetting</a>( p-&gt;<a class="code" href="classImage4DSimple.html#a66cd7e98d03824aad6036c891bb461bf">getCDim</a>(), callback );
<a name="l00241"></a>00241     <span class="keywordflow">for</span> (<a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> i=0; i&lt;chlist.size(); i++)
<a name="l00242"></a>00242     {
<a name="l00243"></a>00243         <a class="code" href="structV3D__Image3DBasic.html">V3D_Image3DBasic</a> v;
<a name="l00244"></a>00244         v.<a class="code" href="structV3D__Image3DBasic.html#a455426adf9bbcb52ea0aac34fdf38a04">setData</a>(p, chlist.at(i));
<a name="l00245"></a>00245         dlist &lt;&lt; v;
<a name="l00246"></a>00246     }
<a name="l00247"></a>00247     <span class="keywordflow">return</span> dlist;
<a name="l00248"></a>00248 }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 
<a name="l00251"></a>00251 <span class="comment">//a function for considering the global setting for data conversion</span>
<a name="l00252"></a><a class="code" href="v3d__interface_8h.html#a716a8d61d418dd91a18fb994a71a19fb">00252</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">bool</span> <a class="code" href="v3d__interface_8h.html#a716a8d61d418dd91a18fb994a71a19fb">setPluginOutputAndDisplayUsingGlobalSetting</a>(T * pluginoutputimg1d, <a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> sz0, <a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> sz1, <a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> sz2, <a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> sz3, <a class="code" href="classV3DPluginCallback.html">V3DPluginCallback</a> &amp; callback, <span class="keyword">const</span> <span class="keywordtype">char</span>* imageName=0)
<a name="l00253"></a>00253 {
<a name="l00254"></a>00254     <span class="keywordflow">if</span> (!pluginoutputimg1d || sz0&lt;=0 || sz1&lt;=0 || sz2&lt;=0 || sz3&lt;=0 )
<a name="l00255"></a>00255     {
<a name="l00256"></a>00256         <a class="code" href="v3d__message_8cpp.html#a2d151f6d35fa7d42db1b95c2d506aeb1">v3d_msg</a>(QString(<span class="stringliteral">&quot;Invalid inputs to setPluginOutputAndDisplayUsingGlobalSetting(). Don&#39;t output the plugin results.\n&quot;</span>));
<a name="l00257"></a>00257         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00258"></a>00258     }
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     <a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> totalunits = sz0*sz1*sz2*sz3;
<a name="l00261"></a>00261     <span class="keywordflow">if</span> (totalunits&lt;=0)
<a name="l00262"></a>00262     {
<a name="l00263"></a>00263         <a class="code" href="v3d__message_8cpp.html#a2d151f6d35fa7d42db1b95c2d506aeb1">v3d_msg</a>(QString(<span class="stringliteral">&quot;Overflow of the *long* data type. Don&#39;t output the plugin results.\n&quot;</span>));
<a name="l00264"></a>00264         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00265"></a>00265     }
<a name="l00266"></a>00266 
<a name="l00267"></a>00267     <a class="code" href="structV3D__GlobalSetting.html">V3D_GlobalSetting</a> gs = callback.<a class="code" href="classV3DPluginCallback.html#a53aadb1e47fc806789e64a1b1bbae2d7">getGlobalSetting</a>();
<a name="l00268"></a>00268 
<a name="l00269"></a>00269     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * output1d = 0;
<a name="l00270"></a>00270     <a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> i;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272     <span class="keywordflow">if</span> ( gs.<a class="code" href="structV3D__GlobalSetting.html#af1867c28e87415fffbbffa87801f21b1">b_plugin_outputImgRescale</a> ) <span class="comment">//rescale to [0, 255]</span>
<a name="l00273"></a>00273     {
<a name="l00274"></a>00274         T mm = pluginoutputimg1d[0], MM = pluginoutputimg1d[0];
<a name="l00275"></a>00275         <span class="keywordflow">for</span> (i=0; i&lt;totalunits; ++i)
<a name="l00276"></a>00276         {
<a name="l00277"></a>00277             <span class="keywordflow">if</span> (pluginoutputimg1d[i]&lt;mm)
<a name="l00278"></a>00278                 mm = pluginoutputimg1d[i];
<a name="l00279"></a>00279             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pluginoutputimg1d[i]&gt;MM)
<a name="l00280"></a>00280                 MM = pluginoutputimg1d[i];
<a name="l00281"></a>00281         }
<a name="l00282"></a>00282 
<a name="l00283"></a>00283         <span class="keywordflow">if</span> ( gs.<a class="code" href="structV3D__GlobalSetting.html#af491f924f3f0f573d9dee5b229e1c46c">b_plugin_outputImgConvert2UINT8</a> || mm==MM ) <span class="comment">//if mm=MM, then no need to use float even the origianl data is float</span>
<a name="l00284"></a>00284         {
<a name="l00285"></a>00285             output1d = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> [totalunits];
<a name="l00286"></a>00286             <span class="keywordflow">if</span> (mm==MM)
<a name="l00287"></a>00287                 <span class="keywordflow">for</span> (i=0; i&lt;totalunits; ++i)
<a name="l00288"></a>00288                     output1d[i] = 0;
<a name="l00289"></a>00289             <span class="keywordflow">else</span>
<a name="l00290"></a>00290             {
<a name="l00291"></a>00291                 <span class="keywordtype">double</span> w = 255.0/(double(MM)-double(mm));
<a name="l00292"></a>00292                 <span class="keywordflow">for</span> (i=0; i&lt;totalunits; ++i)
<a name="l00293"></a>00293                     output1d[i] = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) ((double)pluginoutputimg1d[i] * w);
<a name="l00294"></a>00294             }
<a name="l00295"></a>00295         }
<a name="l00296"></a>00296         <span class="keywordflow">else</span> <span class="comment">//not convert to unsigned char, but to float</span>
<a name="l00297"></a>00297         {
<a name="l00298"></a>00298             <span class="keywordtype">float</span> * output1d_float = <span class="keyword">new</span> <span class="keywordtype">float</span> [totalunits];
<a name="l00299"></a>00299             output1d = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)output1d_float;
<a name="l00300"></a>00300 
<a name="l00301"></a>00301             <span class="keywordtype">double</span> w = 255.0/(double(MM)-double(mm)); <span class="comment">//MM must not equal mm now</span>
<a name="l00302"></a>00302             <span class="keywordflow">for</span> (i=0; i&lt;totalunits; ++i)
<a name="l00303"></a>00303                 output1d_float[i] = (<span class="keywordtype">float</span>) (((double)pluginoutputimg1d[i]-<span class="keywordtype">double</span>(mm)) * w);
<a name="l00304"></a>00304         }
<a name="l00305"></a>00305     }
<a name="l00306"></a>00306     <span class="keywordflow">else</span> <span class="comment">//not rescale to [0, 255]</span>
<a name="l00307"></a>00307     {
<a name="l00308"></a>00308         <span class="keywordflow">if</span> ( gs.<a class="code" href="structV3D__GlobalSetting.html#af491f924f3f0f573d9dee5b229e1c46c">b_plugin_outputImgConvert2UINT8</a> )
<a name="l00309"></a>00309         {
<a name="l00310"></a>00310             output1d = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> [totalunits];
<a name="l00311"></a>00311             <span class="keywordflow">for</span> (i=0; i&lt;totalunits; ++i)
<a name="l00312"></a>00312                 output1d[i] = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(pluginoutputimg1d[i]);
<a name="l00313"></a>00313         }
<a name="l00314"></a>00314         <span class="keywordflow">else</span> <span class="comment">//not convert to unsigned char, but to float</span>
<a name="l00315"></a>00315         {
<a name="l00316"></a>00316             <span class="keywordtype">float</span> * output1d_float = <span class="keyword">new</span> <span class="keywordtype">float</span> [totalunits];
<a name="l00317"></a>00317             output1d = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)output1d_float;
<a name="l00318"></a>00318 
<a name="l00319"></a>00319             <span class="keywordflow">for</span> (i=0; i&lt;totalunits; ++i)
<a name="l00320"></a>00320                 output1d_float[i] = (<span class="keywordtype">float</span>)(pluginoutputimg1d[i]);
<a name="l00321"></a>00321         }
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323 
<a name="l00324"></a>00324     <span class="comment">//now set up the output window and data</span>
<a name="l00325"></a>00325 
<a name="l00326"></a>00326     <a class="code" href="classImage4DSimple.html">Image4DSimple</a> p4DImage;
<a name="l00327"></a>00327     <span class="keywordflow">if</span> ( gs.<a class="code" href="structV3D__GlobalSetting.html#af491f924f3f0f573d9dee5b229e1c46c">b_plugin_outputImgConvert2UINT8</a> )
<a name="l00328"></a>00328     {
<a name="l00329"></a>00329         p4DImage.<a class="code" href="classImage4DSimple.html#a4544d343385914495e17472d1a5cf9b5">setData</a>(output1d, sz0, sz1, sz2, sz3, <a class="code" href="v3d__basicdatatype_8h.html#aacf29f94558f9791b08b57429b04777fa08cd1feb68028281bc49840a98f3d0ca">V3D_UINT8</a>);
<a name="l00330"></a>00330     }
<a name="l00331"></a>00331     <span class="keywordflow">else</span>
<a name="l00332"></a>00332     {
<a name="l00333"></a>00333         p4DImage.<a class="code" href="classImage4DSimple.html#a4544d343385914495e17472d1a5cf9b5">setData</a>(output1d, sz0, sz1, sz2, sz3, <a class="code" href="v3d__basicdatatype_8h.html#aacf29f94558f9791b08b57429b04777fa0748b26672512fdb866933c23f2e27b0">V3D_FLOAT32</a>);
<a name="l00334"></a>00334     }
<a name="l00335"></a>00335 
<a name="l00336"></a>00336     <a class="code" href="v3d__basicdatatype_8h.html#a8a9ce243b82a364a87c31ddcbea31b35">v3dhandle</a> mywin = ( gs.<a class="code" href="structV3D__GlobalSetting.html#a519007b0e7fd893890a85c85884cc660">b_plugin_dispResInNewWindow</a> ) ? callback.<a class="code" href="classV3DPluginCallback.html#ac55437794570400a8f37182888340b9e">newImageWindow</a>() : callback.<a class="code" href="classV3DPluginCallback.html#a72c10370ab576317c1c05b67e4c2960e">currentImageWindow</a>();
<a name="l00337"></a>00337 
<a name="l00338"></a>00338     callback.<a class="code" href="classV3DPluginCallback.html#ae455a3e5334adff2872623bc3517a464">setImage</a>(mywin, &amp;p4DImage);
<a name="l00339"></a>00339         <span class="keywordflow">if</span>(imageName != 0)
<a name="l00340"></a>00340           {
<a name="l00341"></a>00341             callback.<a class="code" href="classV3DPluginCallback.html#acd073ac14588becc7069c12e2b4a70b9">setImageName</a>(mywin, QString(imageName));
<a name="l00342"></a>00342           }
<a name="l00343"></a>00343         <span class="keywordflow">else</span>
<a name="l00344"></a>00344           {
<a name="l00345"></a>00345             callback.<a class="code" href="classV3DPluginCallback.html#acd073ac14588becc7069c12e2b4a70b9">setImageName</a>(mywin, QString(<span class="stringliteral">&quot;plugin_output_image&quot;</span>));
<a name="l00346"></a>00346           }
<a name="l00347"></a>00347     callback.<a class="code" href="classV3DPluginCallback.html#a08918342ce3fbca82f01d2a5ba4dd1be">updateImageWindow</a>(mywin);
<a name="l00348"></a>00348 
<a name="l00349"></a>00349     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00350"></a>00350 }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 <span class="comment">//a function for assembling output of filtered channels of images</span>
<a name="l00353"></a><a class="code" href="v3d__interface_8h.html#a69a37b7efbfcf88892c9cd536b546167">00353</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="v3d__interface_8h.html#a69a37b7efbfcf88892c9cd536b546167">assembleProcessedChannels2Image4DClass</a>(QList&lt;V3D_Image3DBasic&gt; &amp; pd, <a class="code" href="classV3DPluginCallback.html">V3DPluginCallback</a> &amp; cb)
<a name="l00354"></a>00354 {
<a name="l00355"></a>00355     <a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> i;
<a name="l00356"></a>00356     <span class="keywordflow">for</span> (i=0; i&lt;pd.size(); i++)
<a name="l00357"></a>00357     {
<a name="l00358"></a>00358         <span class="keywordflow">if</span> (!pd[i].data1d || pd[i].sz0&lt;=0 || pd[i].sz1&lt;=0 || pd[i].sz2&lt;=0 || (pd[i].datatype!=<a class="code" href="v3d__basicdatatype_8h.html#aacf29f94558f9791b08b57429b04777fa08cd1feb68028281bc49840a98f3d0ca">V3D_UINT8</a> &amp;&amp; pd[i].datatype!=<a class="code" href="v3d__basicdatatype_8h.html#aacf29f94558f9791b08b57429b04777facfd9e82e643d768cb470b41d7e554288">V3D_UINT16</a> &amp;&amp; pd[i].datatype!=<a class="code" href="v3d__basicdatatype_8h.html#aacf29f94558f9791b08b57429b04777fa0748b26672512fdb866933c23f2e27b0">V3D_FLOAT32</a>) )
<a name="l00359"></a>00359         {
<a name="l00360"></a>00360             <a class="code" href="v3d__message_8cpp.html#a2d151f6d35fa7d42db1b95c2d506aeb1">v3d_msg</a>(QString(<span class="stringliteral">&quot;The %1 channel of the input to assembleProcessedChannels2Image4DClass() is invalid. Don&#39;t output the plugin results.\n&quot;</span>).arg(i));
<a name="l00361"></a>00361             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00362"></a>00362         }
<a name="l00363"></a>00363         <span class="keywordflow">if</span> (i&gt;=1)
<a name="l00364"></a>00364         {
<a name="l00365"></a>00365             <span class="keywordflow">if</span> (pd[i].sz0!=pd[i-1].sz0 || pd[i].sz1!=pd[i-1].sz1 || pd[i].sz2!=pd[i-1].sz2 || pd[i].datatype!=pd[i-1].datatype)
<a name="l00366"></a>00366             {
<a name="l00367"></a>00367                 <a class="code" href="v3d__message_8cpp.html#a2d151f6d35fa7d42db1b95c2d506aeb1">v3d_msg</a>(QString(<span class="stringliteral">&quot;The %1 and %2 channels of the input have different sizes in assembleProcessedChannels2Image4DClass() is invalid. Don&#39;t output the plugin results.\n&quot;</span>).arg(i).arg(i-1));
<a name="l00368"></a>00368                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00369"></a>00369             }
<a name="l00370"></a>00370         }
<a name="l00371"></a>00371     }
<a name="l00372"></a>00372     <a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> mysz0 = pd[0].sz0, mysz1 = pd[0].sz1, mysz2 = pd[0].sz2, mysz3 = pd.size();
<a name="l00373"></a>00373     <a class="code" href="v3d__basicdatatype_8h.html#aacf29f94558f9791b08b57429b04777f">ImagePixelType</a> curdatatype = pd[0].datatype;
<a name="l00374"></a>00374     <a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> nunitbytes = 1; <span class="keywordflow">if</span> (curdatatype==<a class="code" href="v3d__basicdatatype_8h.html#aacf29f94558f9791b08b57429b04777facfd9e82e643d768cb470b41d7e554288">V3D_UINT16</a>) nunitbytes=2; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (curdatatype==<a class="code" href="v3d__basicdatatype_8h.html#aacf29f94558f9791b08b57429b04777fa0748b26672512fdb866933c23f2e27b0">V3D_FLOAT32</a>) nunitbytes=4;
<a name="l00375"></a>00375     <a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> nchanbytes = mysz0*mysz1*mysz2*nunitbytes;
<a name="l00376"></a>00376     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pout = 0;
<a name="l00377"></a>00377 
<a name="l00378"></a>00378     <span class="keywordflow">try</span> {
<a name="l00379"></a>00379         pout = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> [nchanbytes * mysz3];
<a name="l00380"></a>00380     }
<a name="l00381"></a>00381     <span class="keywordflow">catch</span> (...)
<a name="l00382"></a>00382     {
<a name="l00383"></a>00383         <a class="code" href="v3d__message_8cpp.html#a2d151f6d35fa7d42db1b95c2d506aeb1">v3d_msg</a>(QString(<span class="stringliteral">&quot;Fail to allocate a buffer memory for output of the plugin in assembleProcessedChannels2Image4DClass().&quot;</span>));
<a name="l00384"></a>00384         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00385"></a>00385     }
<a name="l00386"></a>00386 
<a name="l00387"></a>00387     <span class="comment">//now copy data</span>
<a name="l00388"></a>00388     <span class="keywordflow">for</span> (i=0;i&lt;mysz3;i++)
<a name="l00389"></a>00389     {
<a name="l00390"></a>00390         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *psrc = pd[i].data1d;
<a name="l00391"></a>00391         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pdst = pout + nchanbytes * i;
<a name="l00392"></a>00392         <span class="keywordflow">for</span> (<a class="code" href="v3d__basicdatatype_8h.html#a9ac0036cddfd2650005e7cbe58da47e6">V3DLONG</a> j=0; j&lt;nchanbytes; j++)
<a name="l00393"></a>00393             pdst[j] = psrc[j];
<a name="l00394"></a>00394     }
<a name="l00395"></a>00395 
<a name="l00396"></a>00396     <span class="comment">//now set V3D display</span>
<a name="l00397"></a>00397     <span class="keywordflow">switch</span> (curdatatype)
<a name="l00398"></a>00398     {
<a name="l00399"></a>00399         <span class="keywordflow">case</span> <a class="code" href="v3d__basicdatatype_8h.html#aacf29f94558f9791b08b57429b04777fa08cd1feb68028281bc49840a98f3d0ca">V3D_UINT8</a>:   <span class="keywordflow">return</span> <a class="code" href="v3d__interface_8h.html#a716a8d61d418dd91a18fb994a71a19fb">setPluginOutputAndDisplayUsingGlobalSetting</a>(pout, mysz0, mysz1, mysz2, mysz3, cb); <span class="keywordflow">break</span>;
<a name="l00400"></a>00400         <span class="keywordflow">case</span> <a class="code" href="v3d__basicdatatype_8h.html#aacf29f94558f9791b08b57429b04777facfd9e82e643d768cb470b41d7e554288">V3D_UINT16</a>:  <span class="keywordflow">return</span> <a class="code" href="v3d__interface_8h.html#a716a8d61d418dd91a18fb994a71a19fb">setPluginOutputAndDisplayUsingGlobalSetting</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> *)pout, mysz0, mysz1, mysz2, mysz3, cb); <span class="keywordflow">break</span>;
<a name="l00401"></a>00401         <span class="keywordflow">case</span> <a class="code" href="v3d__basicdatatype_8h.html#aacf29f94558f9791b08b57429b04777fa0748b26672512fdb866933c23f2e27b0">V3D_FLOAT32</a>: <span class="keywordflow">return</span> <a class="code" href="v3d__interface_8h.html#a716a8d61d418dd91a18fb994a71a19fb">setPluginOutputAndDisplayUsingGlobalSetting</a>((<span class="keywordtype">float</span> *)pout, mysz0, mysz1, mysz2, mysz3, cb); <span class="keywordflow">break</span>;
<a name="l00402"></a>00402         <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404 
<a name="l00405"></a>00405     <span class="keywordflow">if</span> (pout) {<span class="keyword">delete</span> []pout; pout=0;} <span class="comment">//100815 per Aurelien &amp; Luis suggestion.</span>
<a name="l00406"></a>00406 
<a name="l00407"></a>00407     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00408"></a>00408 }
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 <span class="comment">// obsolete interface for manipulating only one image at a time.</span>
<a name="l00412"></a><a class="code" href="classV3DSingleImageInterface.html">00412</a> <span class="keyword">class </span><a class="code" href="classV3DSingleImageInterface.html">V3DSingleImageInterface</a>
<a name="l00413"></a>00413 {
<a name="l00414"></a>00414 <span class="keyword">public</span>:
<a name="l00415"></a><a class="code" href="classV3DSingleImageInterface.html#aeb9570d16f11222217e7b6a6d744320f">00415</a>     <span class="keyword">virtual</span> <a class="code" href="classV3DSingleImageInterface.html#aeb9570d16f11222217e7b6a6d744320f">~V3DSingleImageInterface</a>() {}
<a name="l00416"></a>00416 
<a name="l00417"></a>00417     <span class="keyword">virtual</span> QStringList <a class="code" href="classV3DSingleImageInterface.html#a22f62f227004e4e25944cf28f8feb449">menulist</a>() <span class="keyword">const</span> = 0;
<a name="l00418"></a>00418     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classV3DSingleImageInterface.html#a75c2ce8b237c7931385459aedeca33d9">processImage</a>(<span class="keyword">const</span> QString &amp; menu_name, <a class="code" href="classImage4DSimple.html">Image4DSimple</a> * image, QWidget * parent) = 0;
<a name="l00419"></a>00419 };
<a name="l00420"></a>00420 
<a name="l00421"></a>00421 <span class="comment">// And version aware interface for auto updating</span>
<a name="l00422"></a><a class="code" href="classV3DSingleImageInterface2__1.html">00422</a> <span class="keyword">class </span><a class="code" href="classV3DSingleImageInterface2__1.html">V3DSingleImageInterface2_1</a> : <span class="keyword">public</span> <a class="code" href="classV3DSingleImageInterface.html">V3DSingleImageInterface</a>
<a name="l00423"></a>00423 {
<a name="l00424"></a>00424 <span class="keyword">public</span>:
<a name="l00425"></a>00425     <span class="comment">// As a particular plugin is improved,</span>
<a name="l00426"></a>00426     <span class="comment">// this version number should monotonically increase</span>
<a name="l00427"></a>00427     <span class="keyword">virtual</span> <span class="keywordtype">float</span> <a class="code" href="classV3DSingleImageInterface2__1.html#a44cf69d29f96aac5904170d81e932492">getPluginVersion</a>() <span class="keyword">const</span> = 0;
<a name="l00428"></a>00428 };
<a name="l00429"></a>00429 
<a name="l00430"></a>00430 
<a name="l00431"></a>00431 <span class="preprocessor">#endif </span><span class="comment">/* _V3D_INTERFACE_H_ */</span>
<a name="l00432"></a>00432 
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="v3d__interface_8h.html">v3d_interface.h</a>      </li>
      <li class="footer">Generated on Tue Feb 22 2011 10:19:45 for V3D by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
