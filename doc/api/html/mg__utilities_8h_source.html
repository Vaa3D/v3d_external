<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>V3D: mg_utilities.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">V3D</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('mg__utilities_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>mg_utilities.h</h1>  </div>
</div>
<div class="contents">
<a href="mg__utilities_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c)2006-2010  Hanchuan Peng (Janelia Farm, Howard Hughes Medical Institute).  </span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment"> */</span>
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="comment">/************</span>
<a name="l00008"></a>00008 <span class="comment">                                            ********* LICENSE NOTICE ************</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">This folder contains all source codes for the V3D project, which is subject to the following conditions if you want to use it. </span>
<a name="l00011"></a>00011 <span class="comment"></span>
<a name="l00012"></a>00012 <span class="comment">You will ***have to agree*** the following terms, *before* downloading/using/running/editing/changing any portion of codes in this package.</span>
<a name="l00013"></a>00013 <span class="comment"></span>
<a name="l00014"></a>00014 <span class="comment">1. This package is free for non-profit research, but needs a special license for any commercial purpose. Please contact Hanchuan Peng for details.</span>
<a name="l00015"></a>00015 <span class="comment"></span>
<a name="l00016"></a>00016 <span class="comment">2. You agree to appropriately cite this work in your related studies and publications.</span>
<a name="l00017"></a>00017 <span class="comment"></span>
<a name="l00018"></a>00018 <span class="comment">Peng, H., Ruan, Z., Long, F., Simpson, J.H., and Myers, E.W. (2010) “V3D enables real-time 3D visualization and quantitative analysis of large-scale biological image data sets,” Nature Biotechnology, Vol. 28, No. 4, pp. 348-353, DOI: 10.1038/nbt.1612. ( http://penglab.janelia.org/papersall/docpdf/2010_NBT_V3D.pdf )</span>
<a name="l00019"></a>00019 <span class="comment"></span>
<a name="l00020"></a>00020 <span class="comment">Peng, H, Ruan, Z., Atasoy, D., and Sternson, S. (2010) “Automatic reconstruction of 3D neuron structures using a graph-augmented deformable model,” Bioinformatics, Vol. 26, pp. i38-i46, 2010. ( http://penglab.janelia.org/papersall/docpdf/2010_Bioinfo_GD_ISMB2010.pdf )</span>
<a name="l00021"></a>00021 <span class="comment"></span>
<a name="l00022"></a>00022 <span class="comment">3. This software is provided by the copyright holders (Hanchuan Peng), Howard Hughes Medical Institute, Janelia Farm Research Campus, and contributors &quot;as is&quot; and any express or implied warranties, including, but not limited to, any implied warranties of merchantability, non-infringement, or fitness for a particular purpose are disclaimed. In no event shall the copyright owner, Howard Hughes Medical Institute, Janelia Farm Research Campus, or contributors be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; reasonable royalties; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this software, even if advised of the possibility of such damage.</span>
<a name="l00023"></a>00023 <span class="comment"></span>
<a name="l00024"></a>00024 <span class="comment">4. Neither the name of the Howard Hughes Medical Institute, Janelia Farm Research Campus, nor Hanchuan Peng, may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00025"></a>00025 <span class="comment"></span>
<a name="l00026"></a>00026 <span class="comment">*************/</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="comment">/*****************************************************************************************\</span>
<a name="l00032"></a>00032 <span class="comment">*                                                                                         *</span>
<a name="l00033"></a>00033 <span class="comment">*  Utilities for allocating memory, opening files, and processing command line arguments  *</span>
<a name="l00034"></a>00034 <span class="comment">*                                                                                         *</span>
<a name="l00035"></a>00035 <span class="comment">*  Author:  Gene Myers                                                                    *</span>
<a name="l00036"></a>00036 <span class="comment">*  Date  :  October 2005                                                                  *</span>
<a name="l00037"></a>00037 <span class="comment">*                                                                                         *</span>
<a name="l00038"></a>00038 <span class="comment">\*****************************************************************************************/</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="comment">/* changed the include file name by PHC 060816*/</span>
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="preprocessor">#ifndef MG_SR_UTILITIES</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a>00044 <span class="preprocessor">#define MG_SR_UTILITIES</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00047"></a>00047 
<a name="l00048"></a><a class="code" href="mg__utilities_8h.html#a60710bac11b4f1135f61ded06542d661">00048</a> <span class="preprocessor">#define ASCII 128</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>
<a name="l00050"></a>00050 <span class="comment">/* The usual protected allocation and file opening routines.   */</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="keywordtype">void</span> *<a class="code" href="mg__utilities_8cpp.html#a6040cc0a87c498b27642e48492093e1c">Guarded_Malloc</a>(<span class="keywordtype">int</span> size, <span class="keywordtype">char</span> *routine);
<a name="l00053"></a>00053 <span class="keywordtype">void</span> *<a class="code" href="mg__utilities_8cpp.html#a8d5eec0c216b036029a24631d4e56cd9">Guarded_Realloc</a>(<span class="keywordtype">void</span> *array, <span class="keywordtype">int</span> size, <span class="keywordtype">char</span> *routine);
<a name="l00054"></a>00054 <span class="keywordtype">char</span> *<a class="code" href="mg__utilities_8cpp.html#a6b5a960449d8226043ef177a10595c7b">Guarded_Strdup</a>(<span class="keywordtype">char</span> *<span class="keywordtype">string</span>, <span class="keywordtype">char</span> *routine);
<a name="l00055"></a>00055 FILE *<a class="code" href="mg__utilities_8cpp.html#a234d2e3c233a72eeaa8b1dbf5f112dfb">Guarded_Fopen</a>(<span class="keywordtype">char</span> *name, <span class="keywordtype">char</span> *options, <span class="keywordtype">char</span> *routine);
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <span class="comment">/* The structure of the command line to be interpreted is specified in an array of</span>
<a name="l00058"></a>00058 <span class="comment">   &#39;Arg_Spec&#39; records the last of which is {NULL,NULL,NULL} signalling the end of the</span>
<a name="l00059"></a>00059 <span class="comment">   spec.  An arg spec consists of three string fields that are described in detail in</span>
<a name="l00060"></a>00060 <span class="comment">   Appendix A.                                                                         */</span>
<a name="l00061"></a>00061 
<a name="l00062"></a><a class="code" href="structArg__Spec.html">00062</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00063"></a><a class="code" href="structArg__Spec.html#a5ac083a645d964373f022d03df4849c8">00063</a>   { <span class="keywordtype">char</span> *<a class="code" href="structArg__Spec.html#a5ac083a645d964373f022d03df4849c8">name</a>;    <span class="comment">//  lookup name and command line string if an option</span>
<a name="l00064"></a><a class="code" href="structArg__Spec.html#a23506fc4821ab6d9671f3e6222591a96">00064</a>     <span class="keywordtype">char</span> *<a class="code" href="structArg__Spec.html#a23506fc4821ab6d9671f3e6222591a96">type</a>;    <span class="comment">//  syntax and form of the argument</span>
<a name="l00065"></a><a class="code" href="structArg__Spec.html#a348a158f99c13192e51115697c0b925c">00065</a>     <span class="keywordtype">char</span> *<a class="code" href="structArg__Spec.html#a348a158f99c13192e51115697c0b925c">defval</a>;  <span class="comment">//  default value (if any)</span>
<a name="l00066"></a>00066   } <a class="code" href="structArg__Spec.html">Arg_Spec</a>;
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="comment">/* Process the command line according to &#39;spec&#39;.  All arguments are parsed and checked.</span>
<a name="l00069"></a>00069 <span class="comment">   All required argument must be present.  Any failure results in an error message and</span>
<a name="l00070"></a>00070 <span class="comment">   the end of execution.  One tricky thing here is that &#39;spec&#39; itself is interpreted,</span>
<a name="l00071"></a>00071 <span class="comment">   so an invalid spec will also produce an error message.  Be sure to debug the spec!  */</span> 
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="keywordtype">void</span>  <a class="code" href="mg__utilities_8cpp.html#ada3334071367259cbb0ed254cf3befe9">Process_Arguments</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[], <a class="code" href="structArg__Spec.html">Arg_Spec</a> *spec);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="comment">/* Once the command line has been parsed you can get the value of any argument by calling</span>
<a name="l00076"></a>00076 <span class="comment">   the appropriately typed &#39;Get&#39; routine with the name of the argument.  You presumably</span>
<a name="l00077"></a>00077 <span class="comment">   know the type since you wrote the spec.  If an argument is an iterator then you must</span>
<a name="l00078"></a>00078 <span class="comment">   further suppply the &#39;Get&#39; call with the index of the instance you want, where the numbering</span>
<a name="l00079"></a>00079 <span class="comment">   starts at 1.  To know how many instances there are call Argument_Cardinality.  For non-iterative</span>
<a name="l00080"></a>00080 <span class="comment">   arguments this routine returns 1 if the argument has a value, and 0 if it does not.</span>
<a name="l00081"></a>00081 <span class="comment">   Finally, you can get the program name with Program_Name.                             */</span>
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="keywordtype">char</span>  *<a class="code" href="mg__utilities_8cpp.html#a7847b8e6074dffc098fdc1741fb617c2">Program_Name</a>();
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="keywordtype">int</span>    <a class="code" href="mg__utilities_8cpp.html#a6b0dc39df2bbfc2f24b681ae531ee2ec">Argument_Cardinality</a>(<span class="keywordtype">char</span> *name);
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 <span class="keywordtype">int</span>    <a class="code" href="mg__utilities_8cpp.html#a3865e1afe9ffca8016623059c1d43d6f">Get_Int_Arg</a>   (<span class="keywordtype">char</span> *name, ...);
<a name="l00088"></a>00088 <span class="keywordtype">double</span> <a class="code" href="mg__utilities_8cpp.html#af9ded31fef3c0f66de78e14c1a052c48">Get_Double_Arg</a>(<span class="keywordtype">char</span> *name, ...);
<a name="l00089"></a>00089 <span class="keywordtype">char</span>  *<a class="code" href="mg__utilities_8cpp.html#ab7b4aa446abbd98bb5f69fd5ca75a69b">Get_String_Arg</a>(<span class="keywordtype">char</span> *name, ...);
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="comment">/* There may be constraints among the arguments that are not captured by the spec that</span>
<a name="l00092"></a>00092 <span class="comment">   you explictly check after the call to Process_Args.  If you detect an error and wish</span>
<a name="l00093"></a>00093 <span class="comment">   to print out a usage message, a call to Print_Argument_Usage will do so on the file &#39;file&#39;.  */</span>
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="keywordtype">void</span> <a class="code" href="mg__utilities_8cpp.html#a85c31261b9c6451521efd39841537f08">Print_Argument_Usage</a>(FILE *file);
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="mg__utilities_8h.html">mg_utilities.h</a>      </li>
      <li class="footer">Generated on Tue Feb 22 2011 10:19:45 for V3D by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
